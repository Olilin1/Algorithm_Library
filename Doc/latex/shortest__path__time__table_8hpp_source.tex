\doxysection{shortest\+\_\+path\+\_\+time\+\_\+table.\+hpp}
\hypertarget{shortest__path__time__table_8hpp_source}{}\label{shortest__path__time__table_8hpp_source}\index{Graphs/Dijkstra\_Time\_Table/shortest\_path\_time\_table.hpp@{Graphs/Dijkstra\_Time\_Table/shortest\_path\_time\_table.hpp}}
\mbox{\hyperlink{shortest__path__time__table_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{AUTHOR:\ Oliver\ Lindgren}}
\DoxyCodeLine{00003\ \textcolor{comment}{*/}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#ifndef\ SHORTEST\_PATH\_TIME\_TABLE\_DIJKSTRA\_HPP}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#define\ SHORTEST\_PATH\_TIME\_TABLE\_DIJKSTRA\_HPP}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include<vector>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include<utility>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include<queue>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include<limits>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include<iostream>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include<stddef.h>}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_edge}{Edge}}}
\DoxyCodeLine{00016\ \{}
\DoxyCodeLine{00017\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{struct_edge_a116ca8c0e180e6008fbb6c69d0c34b9e}{destination}};}
\DoxyCodeLine{00018\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_edge_a8fed781523c3c808a3d36611725365f4}{travelTime}};}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_edge_a2d859db627d273b5eaf14ccdc1d2f6a6}{firstDeparture}};}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_edge_aab04a7db292bbc2f53ad8c14209b6015}{repeatDepartures}};}
\DoxyCodeLine{00021\ \};}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{comment}{/*}}
\DoxyCodeLine{00025\ \textcolor{comment}{My\ implementation\ of\ the\ dijkstra\ algorithm\ but\ were\ certain\ edges\ may\ only\ be\ used\ on\ certain\ times.}}
\DoxyCodeLine{00026\ \textcolor{comment}{Returns\ a\ vector\ of\ pairs\ where\ the\ second\ item\ of\ each\ element\ i\ is\ the\ distance\ to\ the\ node\ i\ and\ the\ first\ item\ is\ the\ node\ you\ go\ to\ i\ from.}}
\DoxyCodeLine{00027\ \textcolor{comment}{If\ there\ is\ no\ way\ to\ reach\ a\ node\ i\ then\ v[i].first\ and\ v[i].second\ is\ set\ to\ the\ max\ size\ of\ size\_t\ and\ unsigned\ long\ long\ int\ respectively.}}
\DoxyCodeLine{00028\ \textcolor{comment}{The\ start\ node's\ parent\ is\ set\ to\ the\ maximum\ value\ of\ size\_t}}
\DoxyCodeLine{00029\ \textcolor{comment}{Takes\ as\ input\ the\ graph\ represented\ in\ adjacency\ list\ form\ and\ the\ node\ we\ start\ from.}}
\DoxyCodeLine{00030\ \textcolor{comment}{Time\ complexity:\ O(m\ *\ log(n))\ where\ n\ is\ the\ amount\ of\ nodes\ in\ the\ graph\ and\ m\ is\ the\ amount\ of\ edges.}}
\DoxyCodeLine{00031\ \textcolor{comment}{*/}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{shortest__path__time__table_8hpp_a6663709af6a38c4212fbcd6f2a6552a4}{ull}};}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#define\ node\ first}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#define\ parent\ first}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#define\ distance\ second}}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#define\ weight\ second}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ std::vector<std::pair<size\_t,\ unsigned\ long\ long\ int>>\ \mbox{\hyperlink{shortest__path__time__table_8hpp_aeb6cff15d9f6bd5d831f558dcaffdf02}{dijkstra\_shortest\_path\_time\_table}}(\textcolor{keyword}{const}\ std::vector<std::vector<Edge>>\&\ adjaceny\_list,\ \textcolor{keywordtype}{size\_t}\ startNode)\{}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keyword}{struct\ }Compare\{}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ operator()\ (std::pair<size\_t,\ ull>\ a,\ std::pair<size\_t,\ ull>\ b)\{}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ a.distance\ >\ b.distance;}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00044\ \ \ \ \ \};}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ std::vector<std::pair<size\_t,\ ull>>\ parent\_dist\_pair(adjaceny\_list.size(),\ \{std::numeric\_limits<size\_t>::max(),\ std::numeric\_limits<ull>::max()\});}
\DoxyCodeLine{00047\ \ \ \ \ std::priority\_queue<std::pair<size\_t,\ ull>,\ std::vector<std::pair<size\_t,\ ull>>,\ Compare>\ pq;}
\DoxyCodeLine{00048\ \ \ \ \ }
\DoxyCodeLine{00049\ \ \ \ \ pq.push(\{startNode,\ 0\});}
\DoxyCodeLine{00050\ \ \ \ \ parent\_dist\_pair[startNode].distance\ =\ 0;}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keywordflow}{while}(!pq.empty())\{}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ std::pair<size\_t,\ ull>\ p\ =\ pq.top();}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ pq.pop();}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(p.distance\ !=\ parent\_dist\_pair[p.node].distance)}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\ edge\ :\ adjaceny\_list[p.node])\{}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(edge.repeatDepartures\ ==\ 0\ \&\&\ p.distance\ >\ edge.firstDeparture)\ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{int}\ totalTime\ =\ (p.distance\ >\ edge.firstDeparture\ ?\ p.distance\ +\ edge.travelTime\ +\ (edge.firstDeparture\ +\ edge.repeatDepartures\ -\/\ (p.distance\ \%\ edge.repeatDepartures))\%edge.repeatDepartures\ :\ edge.firstDeparture\ +\ edge.travelTime);}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(parent\_dist\_pair[edge.destination].distance\ >\ totalTime)\ \{}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pq.push(\{edge.destination,\ totalTime\});}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parent\_dist\_pair[edge.destination].distance\ =\ totalTime;}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parent\_dist\_pair[edge.destination].parent\ =\ p.node;}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00069\ \ \ \ \ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordflow}{return}\ parent\_dist\_pair;}
\DoxyCodeLine{00072\ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
